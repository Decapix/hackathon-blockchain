import {
  require_react
} from "./chunk-7SNDHR3H.js";
import {
  EVM_PLUGINS,
  PLUGIN_EVENTS,
  WalletInitializationError,
  WalletServicesPluginError
} from "./chunk-VGWJKPGH.js";
import "./chunk-GMQWRXFX.js";
import "./chunk-ATDVI3CM.js";
import "./chunk-CFIX2DL5.js";
import {
  __toESM
} from "./chunk-256EKJAK.js";

// node_modules/@web3auth/wallet-services-plugin-react-hooks/dist/lib.esm/WalletServicesProvider.js
var import_react2 = __toESM(require_react());

// node_modules/@web3auth/wallet-services-plugin-react-hooks/dist/lib.esm/context/WalletServicesContext.js
var import_react = __toESM(require_react());
var WalletServicesContext = (0, import_react.createContext)(null);
function WalletServicesContextProvider({
  children,
  context
}) {
  const [isPluginConnected, setIsPluginConnected] = (0, import_react.useState)(false);
  const [walletServicesPlugin, setWalletServicesPlugin] = (0, import_react.useState)(null);
  const web3AuthContext = (0, import_react.useContext)(context);
  const {
    getPlugin,
    isInitialized,
    isConnected
  } = web3AuthContext;
  (0, import_react.useEffect)(() => {
    if (isInitialized) {
      const plugin = getPlugin(EVM_PLUGINS.WALLET_SERVICES);
      setWalletServicesPlugin(plugin);
    }
  }, [isInitialized, getPlugin]);
  (0, import_react.useEffect)(() => {
    if (isConnected) {
      const plugin = getPlugin(EVM_PLUGINS.WALLET_SERVICES);
      if (!walletServicesPlugin) setWalletServicesPlugin(plugin);
    }
  }, [isConnected, getPlugin, walletServicesPlugin]);
  (0, import_react.useEffect)(() => {
    const connectedListener = () => {
      setIsPluginConnected(true);
    };
    const disconnectedListener = () => {
      setIsPluginConnected(false);
    };
    if (walletServicesPlugin) {
      walletServicesPlugin.on(PLUGIN_EVENTS.CONNECTED, connectedListener);
      walletServicesPlugin.on(PLUGIN_EVENTS.DISCONNECTED, disconnectedListener);
    }
    return () => {
      if (walletServicesPlugin) {
        walletServicesPlugin.off(PLUGIN_EVENTS.CONNECTED, connectedListener);
        walletServicesPlugin.off(PLUGIN_EVENTS.DISCONNECTED, disconnectedListener);
      }
    };
  }, [walletServicesPlugin]);
  const showWalletConnectScanner = (0, import_react.useCallback)(async (showWalletConnectParams) => {
    if (!walletServicesPlugin) throw WalletServicesPluginError.notInitialized();
    if (!isPluginConnected) throw WalletServicesPluginError.walletPluginNotConnected();
    return walletServicesPlugin.showWalletConnectScanner(showWalletConnectParams);
  }, [walletServicesPlugin, isPluginConnected]);
  const showWalletUI = (0, import_react.useCallback)(async (showWalletUiParams) => {
    if (!walletServicesPlugin) throw WalletServicesPluginError.notInitialized();
    if (!isPluginConnected) throw WalletServicesPluginError.walletPluginNotConnected();
    return walletServicesPlugin.showWalletUi(showWalletUiParams);
  }, [walletServicesPlugin, isPluginConnected]);
  const showCheckout = (0, import_react.useCallback)(async (showCheckoutParams) => {
    if (!walletServicesPlugin) throw WalletServicesPluginError.notInitialized();
    if (!isPluginConnected) throw WalletServicesPluginError.walletPluginNotConnected();
    return walletServicesPlugin.showCheckout(showCheckoutParams);
  }, [walletServicesPlugin, isPluginConnected]);
  const showSwap = (0, import_react.useCallback)(async (showSwapParams) => {
    if (!walletServicesPlugin) throw WalletServicesPluginError.notInitialized();
    if (!isPluginConnected) throw WalletServicesPluginError.walletPluginNotConnected();
    return walletServicesPlugin.showSwap(showSwapParams);
  }, [walletServicesPlugin, isPluginConnected]);
  const value = (0, import_react.useMemo)(() => {
    return {
      plugin: walletServicesPlugin,
      isPluginConnected,
      showWalletConnectScanner,
      showCheckout,
      showWalletUI,
      showSwap
    };
  }, [walletServicesPlugin, isPluginConnected, showWalletConnectScanner, showCheckout, showWalletUI, showSwap]);
  return (0, import_react.createElement)(WalletServicesContext.Provider, {
    value
  }, children);
}

// node_modules/@web3auth/wallet-services-plugin-react-hooks/dist/lib.esm/WalletServicesProvider.js
function WalletServicesProvider({
  children,
  context
}) {
  const wsElement = (0, import_react2.createElement)(WalletServicesContextProvider, {
    context
  }, children);
  return wsElement;
}

// node_modules/@web3auth/wallet-services-plugin-react-hooks/dist/lib.esm/hooks/useWalletServicesPlugin.js
var import_react3 = __toESM(require_react());
var useWalletServicesPlugin = () => {
  const context = (0, import_react3.useContext)(WalletServicesContext);
  if (!context) {
    throw WalletInitializationError.fromCode(1e3, "usage of useWalletServicesPlugin not wrapped in `WalletServicesContextProvider`.");
  }
  return context;
};
export {
  WalletServicesContext,
  WalletServicesContextProvider,
  WalletServicesProvider,
  useWalletServicesPlugin
};
//# sourceMappingURL=@web3auth_wallet-services-plugin-react-hooks.js.map
